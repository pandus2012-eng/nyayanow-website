<!-- ============================================ -->
<!-- AI CHAT WIDGET - ADD BEFORE </body> TAG -->
<!-- ============================================ -->

<!-- AI Chat Widget -->
<div id="aiChatWidget" class="fixed bottom-6 right-6 z-50">
  <!-- Chat Button -->
  <button id="chatToggleBtn" class="w-16 h-16 rounded-full bg-gradient-to-r from-[#d4af37] to-[#f4d03f] text-slate-950 shadow-2xl hover:scale-110 transition-all flex items-center justify-center" onclick="toggleChat()">
    <i class="fas fa-comments text-2xl"></i>
  </button>

  <!-- Chat Window -->
  <div id="chatWindow" class="hidden absolute bottom-20 right-0 w-96 max-w-[calc(100vw-3rem)] bg-white rounded-2xl shadow-2xl overflow-hidden border-2 border-slate-200">
    <!-- Chat Header -->
    <div class="bg-gradient-to-r from-slate-950 to-slate-900 text-white p-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-[#d4af37] flex items-center justify-center">
          <i class="fas fa-robot text-slate-950"></i>
        </div>
        <div>
          <div class="font-bold text-sm">
            <span class="lang-en">NyayaNow AI Assistant</span>
            <span class="lang-kn">NyayaNow AI ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï</span>
          </div>
          <div class="text-xs text-slate-300">
            <span class="lang-en">Online ‚Ä¢ Always here to help</span>
            <span class="lang-kn">‡≤Ü‡≤®‡≥ç‚Äå‡≤≤‡≥à‡≤®‡≥ç ‚Ä¢ ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤∏‡≤¶‡≤æ ‡≤∏‡≤ø‡≤¶‡≥ç‡≤ß</span>
          </div>
        </div>
      </div>
      <button onclick="toggleChat()" class="text-white hover:text-[#d4af37] transition">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>

    <!-- Chat Messages -->
    <div id="chatMessages" class="h-96 overflow-y-auto p-4 bg-slate-50 space-y-4">
      <!-- Welcome Message -->
      <div class="flex gap-3">
        <div class="w-8 h-8 rounded-full bg-[#d4af37] flex items-center justify-center flex-shrink-0">
          <i class="fas fa-robot text-slate-950 text-sm"></i>
        </div>
        <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm max-w-[80%]">
          <p class="text-sm text-slate-800">
            <span class="lang-en">üëã Hello! I'm NyayaNow AI Assistant. I can help you with legal questions in simple language. What would you like to know?</span>
            <span class="lang-kn">üëã ‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞! ‡≤®‡≤æ‡≤®‡≥Å NyayaNow AI ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï. ‡≤®‡≤æ‡≤®‡≥Å ‡≤®‡≤ø‡≤Æ‡≤ó‡≥Ü ‡≤∏‡≤∞‡≤≥ ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≤æ‡≤®‡≥Ç‡≤®‡≥Å ‡≤™‡≥ç‡≤∞‡≤∂‡≥ç‡≤®‡≥Ü‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤Æ‡≤æ‡≤°‡≤¨‡≤≤‡≥ç‡≤≤‡≥Ü. ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤è‡≤®‡≥Å ‡≤§‡≤ø‡≤≥‡≤ø‡≤Ø‡≤≤‡≥Å ‡≤¨‡≤Ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≥Ä‡≤∞‡≤ø?</span>
          </p>
        </div>
      </div>

      <!-- Quick Action Buttons -->
      <div class="flex flex-wrap gap-2">
        <button onclick="sendQuickMessage('fir')" class="text-xs px-3 py-2 bg-white border border-slate-300 rounded-full hover:border-[#d4af37] hover:text-[#d4af37] transition">
          <span class="lang-en">üìù How to file FIR?</span>
          <span class="lang-kn">üìù FIR ‡≤π‡≥á‡≤ó‡≥Ü ‡≤´‡≥à‡≤≤‡≥ç ‡≤Æ‡≤æ‡≤°‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å?</span>
        </button>
        <button onclick="sendQuickMessage('cyber')" class="text-xs px-3 py-2 bg-white border border-slate-300 rounded-full hover:border-[#d4af37] hover:text-[#d4af37] transition">
          <span class="lang-en">üíª Cyber fraud help</span>
          <span class="lang-kn">üíª ‡≤∏‡≥à‡≤¨‡≤∞‡≥ç ‡≤µ‡≤Ç‡≤ö‡≤®‡≥Ü ‡≤∏‡≤π‡≤æ‡≤Ø</span>
        </button>
        <button onclick="sendQuickMessage('consumer')" class="text-xs px-3 py-2 bg-white border border-slate-300 rounded-full hover:border-[#d4af37] hover:text-[#d4af37] transition">
          <span class="lang-en">üõí Consumer rights</span>
          <span class="lang-kn">üõí ‡≤ó‡≥ç‡≤∞‡≤æ‡≤π‡≤ï ‡≤π‡≤ï‡≥ç‡≤ï‡≥Å‡≤ó‡≤≥‡≥Å</span>
        </button>
        <button onclick="sendQuickMessage('property')" class="text-xs px-3 py-2 bg-white border border-slate-300 rounded-full hover:border-[#d4af37] hover:text-[#d4af37] transition">
          <span class="lang-en">üè† Tenant issues</span>
          <span class="lang-kn">üè† ‡≤¨‡≤æ‡≤°‡≤ø‡≤ó‡≥Ü‡≤¶‡≤æ‡≤∞ ‡≤∏‡≤Æ‡≤∏‡≥ç‡≤Ø‡≥Ü‡≤ó‡≤≥‡≥Å</span>
        </button>
      </div>
    </div>

    <!-- Chat Input -->
    <div class="p-4 border-t border-slate-200 bg-white">
      <div class="flex gap-2">
        <input 
          type="text" 
          id="chatInput" 
          class="flex-1 px-4 py-2 border border-slate-300 rounded-full focus:outline-none focus:border-[#d4af37] text-sm" 
          placeholder="Type your question..."
          onkeypress="if(event.key === 'Enter') sendMessage()"
        >
        <button onclick="sendMessage()" class="w-10 h-10 rounded-full bg-[#d4af37] text-slate-950 hover:bg-[#e6c45a] transition flex items-center justify-center">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
      <div class="mt-2 text-center">
        <button onclick="escalateToWhatsApp()" class="text-xs text-slate-600 hover:text-[#d4af37] transition">
          <i class="fab fa-whatsapp"></i>
          <span class="lang-en">Talk to human expert</span>
          <span class="lang-kn">‡≤Æ‡≤æ‡≤®‡≤µ ‡≤§‡≤ú‡≥ç‡≤û‡≤∞‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Chat Widget Styles -->
<style>
#chatWindow {
  animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

#chatMessages::-webkit-scrollbar {
  width: 6px;
}

#chatMessages::-webkit-scrollbar-track {
  background: #f1f5f9;
}

#chatMessages::-webkit-scrollbar-thumb {
  background: #d4af37;
  border-radius: 3px;
}

.user-message {
  background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
  color: #0f172a;
  margin-left: auto;
  border-radius: 1rem;
  border-bottom-right-radius: 0.25rem;
}

.ai-message {
  background: white;
  border-radius: 1rem;
  border-top-left-radius: 0.25rem;
}
</style>

<!-- Chat Widget JavaScript -->
<script>
// Chat responses database
const chatResponses = {
  en: {
    fir: {
      text: "To file an FIR:\n\n1. Visit nearest police station\n2. Provide written complaint with details\n3. Police must register FIR\n4. Get FIR copy with number\n5. Keep all evidence safe\n\nWould you like our FIR template?",
      actions: ["Download FIR Template", "Talk to Expert"]
    },
    cyber: {
      text: "For cyber fraud:\n\n1. Report immediately at cybercrime.gov.in\n2. File FIR at local police station\n3. Preserve all evidence (screenshots, messages)\n4. Block fraudulent accounts\n5. Report to bank if money involved\n\nNeed help with the process?",
      actions: ["Report Cybercrime", "Talk to Expert"]
    },
    consumer: {
      text: "For consumer complaints:\n\n1. Contact seller/service provider first\n2. If no response, file complaint at consumer forum\n3. Can be done online or offline\n4. Keep all bills and documents\n5. No lawyer needed for small claims\n\nWant our complaint template?",
      actions: ["Download Template", "Talk to Expert"]
    },
    property: {
      text: "For tenant issues:\n\n1. Check your rent agreement\n2. Send legal notice if needed\n3. Can approach rent control court\n4. Document all communications\n5. Keep payment receipts safe\n\nNeed specific help?",
      actions: ["Download Notice Format", "Talk to Expert"]
    },
    default: {
      text: "I can help you with:\n\n‚Ä¢ FIR & Police Complaints\n‚Ä¢ Cyber Fraud\n‚Ä¢ Consumer Rights\n‚Ä¢ Property/Tenant Issues\n‚Ä¢ Women Safety\n‚Ä¢ RTI Applications\n\nWhat would you like to know more about?",
      actions: ["Browse Services", "Talk to Expert"]
    }
  },
  kn: {
    fir: {
      text: "FIR ‡≤´‡≥à‡≤≤‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å:\n\n1. ‡≤π‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≤¶ ‡≤™‡≥ä‡≤≤‡≥Ä‡≤∏‡≥ç ‡≤†‡≤æ‡≤£‡≥Ü‡≤ó‡≥Ü ‡≤≠‡≥á‡≤ü‡≤ø ‡≤®‡≥Ä‡≤°‡≤ø\n2. ‡≤µ‡≤ø‡≤µ‡≤∞‡≤ó‡≤≥‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤≤‡≤ø‡≤ñ‡≤ø‡≤§ ‡≤¶‡≥Ç‡≤∞‡≥Å ‡≤í‡≤¶‡≤ó‡≤ø‡≤∏‡≤ø\n3. ‡≤™‡≥ä‡≤≤‡≥Ä‡≤∏‡≤∞‡≥Å FIR ‡≤®‡≥ã‡≤Ç‡≤¶‡≤æ‡≤Ø‡≤ø‡≤∏‡≤¨‡≥á‡≤ï‡≥Å\n4. ‡≤∏‡≤Ç‡≤ñ‡≥ç‡≤Ø‡≥Ü‡≤Ø‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü FIR ‡≤®‡≤ï‡≤≤‡≥Å ‡≤™‡≤°‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø\n5. ‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤∏‡≤æ‡≤ï‡≥ç‡≤∑‡≥ç‡≤Ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤á‡≤∞‡≤ø‡≤∏‡≤ø\n\n‡≤®‡≤Æ‡≥ç‡≤Æ FIR ‡≤ü‡≥Ü‡≤Ç‡≤™‡≥ç‡≤≤‡≥á‡≤ü‡≥ç ‡≤¨‡≥á‡≤ï‡≥á?",
      actions: ["FIR ‡≤ü‡≥Ü‡≤Ç‡≤™‡≥ç‡≤≤‡≥á‡≤ü‡≥ç ‡≤°‡≥å‡≤®‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø", "‡≤§‡≤ú‡≥ç‡≤û‡≤∞‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø"]
    },
    cyber: {
      text: "‡≤∏‡≥à‡≤¨‡≤∞‡≥ç ‡≤µ‡≤Ç‡≤ö‡≤®‡≥Ü‡≤ó‡≤æ‡≤ó‡≤ø:\n\n1. cybercrime.gov.in ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤§‡≤ï‡≥ç‡≤∑‡≤£ ‡≤µ‡≤∞‡≤¶‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø\n2. ‡≤∏‡≥ç‡≤•‡≤≥‡≥Ä‡≤Ø ‡≤™‡≥ä‡≤≤‡≥Ä‡≤∏‡≥ç ‡≤†‡≤æ‡≤£‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø FIR ‡≤´‡≥à‡≤≤‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø\n3. ‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤∏‡≤æ‡≤ï‡≥ç‡≤∑‡≥ç‡≤Ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤Ç‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤∏‡≤ø\n4. ‡≤µ‡≤Ç‡≤ö‡≤ï ‡≤ñ‡≤æ‡≤§‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤ø‡≤∞‡≥ç‡≤¨‡≤Ç‡≤ß‡≤ø‡≤∏‡≤ø\n5. ‡≤π‡≤£ ‡≤í‡≤≥‡≤ó‡≥ä‡≤Ç‡≤°‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü ‡≤¨‡≥ç‡≤Ø‡≤æ‡≤Ç‡≤ï‡≥ç‚Äå‡≤ó‡≥Ü ‡≤µ‡≤∞‡≤¶‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø\n\n‡≤™‡≥ç‡≤∞‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≥Ü‡≤ó‡≥Ü ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤¨‡≥á‡≤ï‡≥á?",
      actions: ["‡≤∏‡≥à‡≤¨‡≤∞‡≥ç‚Äå‡≤ï‡≥ç‡≤∞‡≥à‡≤Æ‡≥ç ‡≤µ‡≤∞‡≤¶‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø", "‡≤§‡≤ú‡≥ç‡≤û‡≤∞‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø"]
    },
    consumer: {
      text: "‡≤ó‡≥ç‡≤∞‡≤æ‡≤π‡≤ï ‡≤¶‡≥Ç‡≤∞‡≥Å‡≤ó‡≤≥‡≤ø‡≤ó‡≤æ‡≤ó‡≤ø:\n\n1. ‡≤Æ‡≥ä‡≤¶‡≤≤‡≥Å ‡≤Æ‡≤æ‡≤∞‡≤æ‡≤ü‡≤ó‡≤æ‡≤∞/‡≤∏‡≥á‡≤µ‡≤æ ‡≤™‡≥Ç‡≤∞‡≥à‡≤ï‡≥Ü‡≤¶‡≤æ‡≤∞‡≤∞‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤ø\n2. ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≥Ü ‡≤á‡≤≤‡≥ç‡≤≤‡≤¶‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü, ‡≤ó‡≥ç‡≤∞‡≤æ‡≤π‡≤ï ‡≤µ‡≥á‡≤¶‡≤ø‡≤ï‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤¶‡≥Ç‡≤∞‡≥Å ‡≤∏‡≤≤‡≥ç‡≤≤‡≤ø‡≤∏‡≤ø\n3. ‡≤Ü‡≤®‡≥ç‚Äå‡≤≤‡≥à‡≤®‡≥ç ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤Ü‡≤´‡≥ç‚Äå‡≤≤‡≥à‡≤®‡≥ç ‡≤Æ‡≤æ‡≤°‡≤¨‡≤π‡≥Å‡≤¶‡≥Å\n4. ‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤¨‡≤ø‡≤≤‡≥ç‚Äå‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤¶‡≤æ‡≤ñ‡≤≤‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤á‡≤∞‡≤ø‡≤∏‡≤ø\n5. ‡≤∏‡≤£‡≥ç‡≤£ ‡≤π‡≤ï‡≥ç‡≤ï‡≥Å‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤µ‡≤ï‡≥Ä‡≤≤‡≤∞ ‡≤Ö‡≤ó‡≤§‡≥ç‡≤Ø‡≤µ‡≤ø‡≤≤‡≥ç‡≤≤\n\n‡≤®‡≤Æ‡≥ç‡≤Æ ‡≤¶‡≥Ç‡≤∞‡≥Å ‡≤ü‡≥Ü‡≤Ç‡≤™‡≥ç‡≤≤‡≥á‡≤ü‡≥ç ‡≤¨‡≥á‡≤ï‡≥á?",
      actions: ["‡≤ü‡≥Ü‡≤Ç‡≤™‡≥ç‡≤≤‡≥á‡≤ü‡≥ç ‡≤°‡≥å‡≤®‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø", "‡≤§‡≤ú‡≥ç‡≤û‡≤∞‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø"]
    },
    property: {
      text: "‡≤¨‡≤æ‡≤°‡≤ø‡≤ó‡≥Ü‡≤¶‡≤æ‡≤∞ ‡≤∏‡≤Æ‡≤∏‡≥ç‡≤Ø‡≥Ü‡≤ó‡≤≥‡≤ø‡≤ó‡≤æ‡≤ó‡≤ø:\n\n1. ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≤æ‡≤°‡≤ø‡≤ó‡≥Ü ‡≤í‡≤™‡≥ç‡≤™‡≤Ç‡≤¶‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤ø\n2. ‡≤Ö‡≤ó‡≤§‡≥ç‡≤Ø‡≤µ‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü ‡≤ï‡≤æ‡≤®‡≥Ç‡≤®‡≥Å ‡≤®‡≥ã‡≤ü‡≥Ä‡≤∏‡≥ç ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≤ø\n3. ‡≤¨‡≤æ‡≤°‡≤ø‡≤ó‡≥Ü ‡≤®‡≤ø‡≤Ø‡≤Ç‡≤§‡≥ç‡≤∞‡≤£ ‡≤®‡≥ç‡≤Ø‡≤æ‡≤Ø‡≤æ‡≤≤‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤π‡≥ã‡≤ó‡≤¨‡≤π‡≥Å‡≤¶‡≥Å\n4. ‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤∏‡≤Ç‡≤µ‡≤π‡≤®‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤¶‡≤æ‡≤ñ‡≤≤‡≤ø‡≤∏‡≤ø\n5. ‡≤™‡≤æ‡≤µ‡≤§‡≤ø ‡≤∞‡≤∏‡≥Ä‡≤¶‡≤ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤á‡≤∞‡≤ø‡≤∏‡≤ø\n\n‡≤®‡≤ø‡≤∞‡≥ç‡≤¶‡≤ø‡≤∑‡≥ç‡≤ü ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤¨‡≥á‡≤ï‡≥á?",
      actions: ["‡≤®‡≥ã‡≤ü‡≥Ä‡≤∏‡≥ç ‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤ü‡≥ç ‡≤°‡≥å‡≤®‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø", "‡≤§‡≤ú‡≥ç‡≤û‡≤∞‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø"]
    },
    default: {
      text: "‡≤®‡≤æ‡≤®‡≥Å ‡≤®‡≤ø‡≤Æ‡≤ó‡≥Ü ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤Æ‡≤æ‡≤°‡≤¨‡≤≤‡≥ç‡≤≤‡≥Ü:\n\n‚Ä¢ FIR & ‡≤™‡≥ä‡≤≤‡≥Ä‡≤∏‡≥ç ‡≤¶‡≥Ç‡≤∞‡≥Å‡≤ó‡≤≥‡≥Å\n‚Ä¢ ‡≤∏‡≥à‡≤¨‡≤∞‡≥ç ‡≤µ‡≤Ç‡≤ö‡≤®‡≥Ü\n‚Ä¢ ‡≤ó‡≥ç‡≤∞‡≤æ‡≤π‡≤ï ‡≤π‡≤ï‡≥ç‡≤ï‡≥Å‡≤ó‡≤≥‡≥Å\n‚Ä¢ ‡≤Ü‡≤∏‡≥ç‡≤§‡≤ø/‡≤¨‡≤æ‡≤°‡≤ø‡≤ó‡≥Ü‡≤¶‡≤æ‡≤∞ ‡≤∏‡≤Æ‡≤∏‡≥ç‡≤Ø‡≥Ü‡≤ó‡≤≥‡≥Å\n‚Ä¢ ‡≤Æ‡≤π‡≤ø‡≤≥‡≤æ ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤§‡≥Ü\n‚Ä¢ RTI ‡≤Ö‡≤∞‡≥ç‡≤ú‡≤ø‡≤ó‡≤≥‡≥Å\n\n‡≤®‡≥Ä‡≤µ‡≥Å ‡≤è‡≤®‡≥Å ‡≤§‡≤ø‡≤≥‡≤ø‡≤Ø‡≤≤‡≥Å ‡≤¨‡≤Ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≥Ä‡≤∞‡≤ø?",
      actions: ["‡≤∏‡≥á‡≤µ‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≥ç‡≤∞‡≥å‡≤∏‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø", "‡≤§‡≤ú‡≥ç‡≤û‡≤∞‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø"]
    }
  }
};

function toggleChat() {
  const chatWindow = document.getElementById('chatWindow');
  chatWindow.classList.toggle('hidden');
}

function sendQuickMessage(topic) {
  const lang = document.body.classList.contains('kn-active') ? 'kn' : 'en';
  const response = chatResponses[lang][topic] || chatResponses[lang].default;
  
  addAIMessage(response.text, response.actions);
}

function sendMessage() {
  const input = document.getElementById('chatInput');
  const message = input.value.trim();
  
  if (!message) return;
  
  // Add user message
  addUserMessage(message);
  input.value = '';
  
  // Simulate AI thinking
  setTimeout(() => {
    const lang = document.body.classList.contains('kn-active') ? 'kn' : 'en';
    const response = chatResponses[lang].default;
    addAIMessage(response.text, response.actions);
  }, 1000);
}

function addUserMessage(text) {
  const messagesContainer = document.getElementById('chatMessages');
  const messageDiv = document.createElement('div');
  messageDiv.className = 'flex justify-end';
  messageDiv.innerHTML = `
    <div class="user-message p-3 max-w-[80%] shadow-sm">
      <p class="text-sm">${text}</p>
    </div>
  `;
  messagesContainer.appendChild(messageDiv);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function addAIMessage(text, actions = []) {
  const messagesContainer = document.getElementById('chatMessages');
  const messageDiv = document.createElement('div');
  messageDiv.className = 'flex gap-3';
  
  let actionsHTML = '';
  if (actions && actions.length > 0) {
    actionsHTML = '<div class="mt-2 flex flex-wrap gap-2">';
    actions.forEach(action => {
      actionsHTML += `<button onclick="handleAction('${action}')" class="text-xs px-3 py-1.5 bg-[#d4af37] text-slate-950 rounded-full hover:bg-[#e6c45a] transition">${action}</button>`;
    });
    actionsHTML += '</div>';
  }
  
  messageDiv.innerHTML = `
    <div class="w-8 h-8 rounded-full bg-[#d4af37] flex items-center justify-center flex-shrink-0">
      <i class="fas fa-robot text-slate-950 text-sm"></i>
    </div>
    <div class="ai-message p-3 max-w-[80%] shadow-sm">
      <p class="text-sm whitespace-pre-line">${text}</p>
      ${actionsHTML}
    </div>
  `;
  messagesContainer.appendChild(messageDiv);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function handleAction(action) {
  if (action.includes('Expert') || action.includes('‡≤§‡≤ú‡≥ç‡≤û')) {
    escalateToWhatsApp();
  } else if (action.includes('Template') || action.includes('‡≤ü‡≥Ü‡≤Ç‡≤™‡≥ç‡≤≤‡≥á‡≤ü‡≥ç')) {
    window.location.href = '#templates';
    toggleChat();
  } else if (action.includes('Services') || action.includes('‡≤∏‡≥á‡≤µ‡≥Ü‡≤ó‡≤≥‡≥Å')) {
    window.location.href = '#all-services';
    toggleChat();
  }
}

function escalateToWhatsApp() {
  window.open('https://wa.me/919632786767?text=I need legal help', '_blank');
}
</script>
